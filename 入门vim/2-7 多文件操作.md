## Vim 多文件操作

### 多文件操作相关概念

- Buffer 是指打开一个文件的内存缓冲区
- 窗口是 Buffer 可视化的分割区域
- Tab 可以组织窗口为一个工作区

### Buffer

#### Buffer - 什么是缓冲区？

- Vim 打开一个文件后会加载文件内容到缓冲区
- 之后的修改都是针对内存中的缓冲区，并不会直接保持到文件
- 直到我们执行 :w (write) 的时候才会把修改内容写入到文件里

#### 如何在 Buffer  之间切换

- 使用 :ls 会列举当前缓冲区，然后使用 :b n 跳转到第n个缓冲区
- :bpre  :bnext  :bfirst  :blast
- 使用 :b buffer_name 加上 tab 补全来跳转



### 窗口

#### 窗口是可视化的分割区域

- 一个缓冲区可以分割成多个窗口，每个窗口也可以打开不同缓冲区
- <Ctrl+w>s 水平分割， <Ctrl+w>v 垂直分割。 或者用 :sp 和 :vs
- 每个窗口可以继续被无限分割(根据屏幕大小)

#### 如何切换窗口

切换窗口的命令都是基于 `Ctrl + w` 作为前缀：

|  命令   |       用途       |
| :-----: | :--------------: |
| <C-w> w | 在窗口间循环切换 |
| <C-w> h | 切换到左边的窗口 |
| <C-w> j |  切换到下边窗口  |
| <C-w> k | 切换到上边的窗口 |
| <C-w> l | 切换到右边的窗口 |

#### 如何重排窗口

|    命令     |           用途            |
| :---------: | :-----------------------: |
|   <C-w> =   |   使所有窗口等宽、等高    |
|   <C-w> _   |   最大化活动窗口的高度    |
|  <C-w> \|   |   最大化活动窗口的宽度    |
| [N]<C-w> _  | 把活动窗口的高度设为[N]行 |
| [N]<C-w> \| | 把活动窗口的宽度设为[N]列 |



### Tab(标签页) 将窗口分组

#### Tab 是可以容纳一系列窗口的容器 (:h tabpage)

-  Vim 的 Tab 和其他编辑器不太一样，可以想象成 linux 虚拟桌面
- 比如一个 Tab 全用来编辑 Python 文件，一个 Tab 全是 HTML 文件
- 相比窗口，Tab 使用较少，管理也比较麻烦

#### Tab(标签页) 操作

常见操作：

|         命令          |                 用途                 |
| :-------------------: | :----------------------------------: |
| :tabe[dit] {filename} |       在新标签页打开{filename}       |
|        <C-w> T        |      把当前窗口移到一个新标签页      |
|      :tabc[lose]      |    关闭当前标签页及其中的所有窗口    |
|      :tabo[nly]       | 只保留活动标签页，关闭所有其他标签页 |

#### Tab(标签页) 切换操作

切换到不同的标签页，一般建立两个就好

|    Ex 命令     | 普通模式命令 |          用途           |
| :------------: | :----------: | :---------------------: |
| :tabn[ext] {N} |    {N}gt     | 切换到编号为[N]的标签页 |
|   :tabn[ext]   |      gt      |    切换到下一标签页     |
| :tabp[revious] |      gT      |    切换到上一标签页     |

打开新的tab命令：`:tabnew filename`

### 课后练习

屏幕大，多文件操作很方便，脱离鼠标

- 用 vim  一次性操作多文件
- 窗口分割
- 插件

